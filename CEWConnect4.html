<!DOCTYPE html>
<html lang="en-US">
<head>
	<style>
		body {background-color: #4AA0E4 ;}
		table, td{
		border: 1px solid white;
		border-collapse: collapse;
		}
		img{
			width: 50px;
			height: 50px;
		}
		.dropper{
			padding: 10px 1px;
		}
		.restart{
			padding: 10px 24px;
		}
		ul {
			  list-style-type: none;
			  margin: 0;
			  padding: 0;
			  overflow: hidden;
			  background-color: #333;
			}

			li {
			  float: left;
			}

			li a {
			  display: block;
			  color: white;
			  text-align: center;
			  padding: 14px 16px;
			  text-decoration: none;
			}

			li a:hover {
			  background-color: #111;
			}
	</style>
</head>
<title>Customer Experience Week | Connect 4</title>
<body>
	
	<center>

	<h1>Customer Experience Week <br> Connect 4</h1>
	
	<p id = "console">
		<br> Instructions:
		<br> Click 'Start Game' to Start.
		<br> Click 'Drop Here' to place your token.<br>
		<!--<button onclick="players = 1; turnChoice();">1 Player</button>-->
		<button onclick="players = 1; start();">Start Game</button>
		
	</p>
	
	<table cellpadding="1">
		<tr>
			<th><button class = "dropper" disabled = "true" onclick = "playerMoves(0);" height="20">Drop Here</button></th>
			<th><button class = "dropper" disabled = "true" onclick = "playerMoves(1);" height="20">Drop Here</button></th>
			<th><button class = "dropper" disabled = "true" onclick = "playerMoves(2);" height="20">Drop Here</button></th>
			<th><button class = "dropper" disabled = "true" onclick = "playerMoves(3);" height="20">Drop Here</button></th>
			<th><button class = "dropper" disabled = "true" onclick = "playerMoves(4);" height="20">Drop Here</button></th>
			<th><button class = "dropper" disabled = "true" onclick = "playerMoves(5);" height="20">Drop Here</button></th>
			<th><button class = "dropper" disabled = "true" onclick = "playerMoves(6);" height="20">Drop Here</button></th>
		</tr>
		<tr>
			<td id = "00"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "01"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "02"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "03"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "04"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "05"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "06"><center><img class = "slot" src="images/blank.png"></center></td>
		</tr>
		<tr>
			<td id = "10"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "11"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "12"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "13"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "14"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "15"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "16"><center><img class = "slot" src="images/blank.png"></center></td>
		</tr>
		<tr>
			<td id = "20"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "21"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "22"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "23"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "24"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "25"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "26"><center><img class = "slot" src="images/blank.png"></center></td>
		</tr>
		<tr>
			<td id = "30"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "31"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "32"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "33"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "34"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "35"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "36"><center><img class = "slot" src="images/blank.png"></center></td>
		</tr>
		<tr>
			<td id = "40"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "41"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "42"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "43"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "44"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "45"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "46"><center><img class = "slot" src="images/blank.png"></center></td>
		</tr>
		<tr>
			<td id = "50"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "51"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "52"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "53"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "54"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "55"><center><img class = "slot" src="images/blank.png"></center></td>
			<td id = "56"><center><img class = "slot" src="images/blank.png"></center></td>
		</tr>
	</table>
	<p id = "log"></p>
	<p><button class = "restart" onclick = "restart();">Restart</button>
</center>
<script>
var players = 0;
var different = document.getElementsByClassName("dropper");
var allSlots = document.getElementsByClassName("slot");
var black = true;
var blankPic = '<center><img class = "slot" src = "images/blank.png"></center>';
var turn = 1;
var botColor = 0;
var difficulty = 0;
var winPoints = 1;
var lossPoints = 1;
var board = 
[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];

var simBoard = 
[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];

var weight06 = 1;
var weight15 = 1.5;
var weight24 = 1.75;
var weight3 = 2;
var userblockwin = 0;
var botblockwin = 0;
var randomCol = Math.floor((Math.random() * 7));

/*function turnChoice(){
	document.getElementById("console").innerHTML = "<button onclick='botColor = 2; botLevelChoice();'>Black</button> <button onclick='botColor = 1; botLevelChoice();'>Red</button>";
}
function botLevelChoice(){
	document.getElementById("console").innerHTML = "<button onclick='difficulty = 1; start();'>Easy</button> <button onclick='difficulty = 2; start();'>Medium</button> <button onclick='difficulty = 3; pointWeights();'>Hard</button>";
}
function pointWeights(){
	document.getElementById("console").innerHTML = "How many points for winning? <br/> <button onclick='winPoints = 0; lossChoice();'>0</button> <button onclick='winPoints = 1; lossChoice();'>1</button> <button onclick='winPoints = 2; lossChoice();'>2</button>";
}
function lossChoice(){
	document.getElementById("console").innerHTML = "How many points for losing? <br/> <button onclick='lossPoints = 0; start();'>0</button> <button onclick='lossPoints = 1; start();'>1</button> <button onclick='lossPoints = 2; start();'>2</button>";
}*/

function start(){
	for(i = 0; i < 7; i+=1){
			different[i].disabled = false;
	}
	/*if(players == 1 && botColor == 1){
		blackBot();
	}
	else{
		document.getElementById("console").innerHTML = "Black's Turn";
	}*/
	blackBot();
}
function drop(col){
	if(test4win(board)){
		//alert("winner");
		document.getElementById("console").innerHTML = "Winner!";
		for(i = 0; i < 7; i+=1){
			different[i].disabled = true;
		}
	}
	else if(turn == 42){
		document.getElementById("console").innerHTML = "It's hard to do this. Y'all tied.";
	}
	else if(board[0][col] == 0){
		if(black){
			var tracker = 1;
			var pic = '<center><img class = "slot" src = "images/black.png"></center>';
			black = false;
			document.getElementById("console").innerHTML = "Red's Turn";
		}
		else{
			var tracker = 2;
			var pic = '<center><img class = "slot" src = "images/red.png"></center>';
			black = true;
			document.getElementById("console").innerHTML = "Black's Turn";
		}
		board[0][col] = tracker;
		document.getElementById('0' + col).innerHTML = pic;
		for(i = 1; i<6; i+=1){
			if(board[i][col] == 0){
			board[i-1][col] = 0;
			board[i][col] = tracker;
			document.getElementById("" + i + col).innerHTML = pic;
			document.getElementById("" + (i-1) + col).innerHTML = blankPic;
			}	
			else{break};
		}
		
	}
	turn += 1;
}

function playerMoves(col){
	if(board[0][col] == 0){
		drop(col);
		if(players == 1 && !test4win(board)){
			/*if(botColor == 1){
				blackBot();
			}else if(botColor == 2){
				redBot();
			}*/
			blackBot();
		}else if(players == 1 && test4win(board)){
			if(test4win(board)){
				//alert("winner");
				document.getElementById("console").innerHTML = "Winner!";
				for(i = 0; i < 7; i+=1){
					different[i].disabled = true;
				}
			}
		}
	}
}

/*function simDrop(col, simBlack){
	if(simBoard[0][col] == 0){
		if(simBlack){
			tracker = 1;
		}
		else{
			tracker = 2;
		}
		simBoard[0][col] = tracker;
		for(i = 1; i<6; i+=1){
			if(simBoard[i][col] == 0){
			simBoard[i-1][col] = 0;
			simBoard[i][col] = tracker;
			}	
			else{break};
		}
		
	}
}*/
function test4win(testBoard){
	
	//check for win right
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			if(c<4){
				if(testBoard[r][c] != 0 & (testBoard[r][c] == testBoard[r][c + 1]) & (testBoard[r][c] == testBoard[r][c + 2]) & (testBoard[r][c] == testBoard[r][c + 3])){
					return true;
				}	
			}
		}			
	}
	//added
	//alert("test win left");
	//check for win left
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 on the left
			if(c>2){
				if(testBoard[r][c] != 0 & (testBoard[r][c] == testBoard[r][c - 1]) & (testBoard[r][c] == testBoard[r][c - 2]) & (testBoard[r][c] == testBoard[r][c - 3])){
					return true;
				}
			}
		}			
	}
	//alert("test win up");
	//check for win up
	for(c = 0; c < 7; c+=1){
		for(r = 5; r > -1; r-=1){
			if(r>2){
				if(testBoard[r][c] != 0 & (testBoard[r][c] == testBoard[r - 1][c]) & (testBoard[r][c] == testBoard[r - 2][c]) & (testBoard[r][c] == testBoard[r - 3][c])){
					return true;
				}	
			}
		}
	}
	//alert("test win up right");
	//check for win up right
	for(r = 5; r >= 0; r-=1){
		for(c = 0; c < 7; c+=1){
			if(r>2&&c<4){
				if(testBoard[r][c] != 0 & (testBoard[r][c] == testBoard[r - 1][c + 1]) & (testBoard[r][c] == testBoard[r - 2][c + 2]) & (testBoard[r][c] == testBoard[r - 3][c + 3])){
					return true;
				}	
			}
		}
	}
	//added
	//alert("test win down right");
	//check for win down right
	for(r = 5; r >= 0; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 below
			if(r<3&&c<4){
				if(testBoard[r][c] != 0 & (testBoard[r][c] == testBoard[r + 1][c + 1]) & (testBoard[r][c] == testBoard[r + 2][c + 2]) & (testBoard[r][c] == testBoard[r + 3][c + 3])){
					return true;
				}				
			}
		}
	}
	//alert("test win up left");
	//check for win up left
	for(r = 5; r >= 0; r-=1){
		for(c = 0; c < 7; c+=1){
			if(r>2&&c>2)
			if(testBoard[r][c] != 0 & (testBoard[r][c] == testBoard[r - 1][c - 1]) & (testBoard[r][c] == testBoard[r - 2][c - 2]) & (testBoard[r][c] == testBoard[r - 3][c - 3])){
				return true;
			}
		}
	}
	//added
	//alert("test win down left");
	//check for win down left
	for(r = 5; r >= 0; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space 4 below
			if(r<3&&c>2){
				if(testBoard[r][c] != 0 & (testBoard[r][c] == testBoard[r + 1][c - 1]) & (testBoard[r][c] == testBoard[r + 2][c - 2]) & (testBoard[r][c] == testBoard[r + 3][c - 3])){
					return true;
				}
			}
		}
	}
	return false;
}
function restart(){
	black = true;
	turn = 1;
	board = 
	[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];
	//document.getElementById("console").innerHTML = "<button onclick='players = 1; turnChoice();'>1 Player</button> <button onclick='players = 2; start();'>2 Players</button>";
	document.getElementById("console").innerHTML = "<button onclick='players = 1; start();'>Start Game</button>";
	for(i = 0; i < 7; i+=1){
			different[i].disabled = true;
	}
	for(i = 0; i<42; i+=1){
		allSlots[i].src = "images/blank.png"; 
	}
}
function fillSimBoard(){
	for(r = 0; r < 6; r+=1){
		for(c = 0; c < 7; c +=1){
			simBoard[r][c] = board[r][c];
		}
	}
}
function blackBot(){
	/*if(difficulty == 1){drop(blackBotEasyChoice());}
	else if(difficulty == 2){drop(blackBotMedChoice());}
	else if(difficulty == 3){*/
		drop(botChoice());
		if(test4win(board)){
			//alert("winner");
			document.getElementById("console").innerHTML = "Winner!";
			for(i = 0; i < 7; i+=1){
				different[i].disabled = true;
			}
		}
	//}
}
/*function redBot(){
	if(difficulty == 1){drop(redBotEasyChoice());}
	else if(difficulty == 2){drop(redBotMedChoice());}
	else if(difficulty == 3){drop(redBotHardChoice());}
}*/

function botChoice(){
	fillSimBoard();
	var dont = []
	var points = [0,0,0,0,0,0,0];
	var pointChoice = 7;
	userblockwin = 0;
	botblockwin = 0;
	randomCol = Math.floor((Math.random() * 7));
	var temp = 5;
	
	//alert("rand: "+randomCol);
	
	if(turn == 1){
		return 3;
	}
	if(turn == 3){
		if(board[5][4]==0)
			return 4;
		else if(board[5][2]==0)
			return 2;
		else if(board[5][5]==0)
			return 5;
		else if(board[5][1]==0)
			return 1;
		else if(board[5][0]==0)
			return 0;
		else if(board[5][6]==0)
			return 6;
	}
	if(turn >= 5 && turn%2 == 1){
		//alert("turn: "+turn+" turn%2: "+(turn%2));
		if(checkBot()){
			//alert("check user is true. botblockwin: "+botblockwin);
			return botblockwin;
		}else if(checkUser()){
			//alert("userblockwin: "+userblockwin+"\ncheckuser is true\n"+board+"\nSim board\n"+simBoard);
			return userblockwin;
		}else{
			//alert("random");
			//alert("rng\n"+randomCol);
			while(simBoard[temp][randomCol]==!0){
				if(temp == 0){
					temp = 6;
					randomCol = Math.floor((Math.random() * 7));	
				}
				temp--;
			}
			return randomCol;
		}
	}
}

function checkUser(){
	//alert("Checkuser");
	//check for win right
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			if(simBoard[r][c] == 2 & (simBoard[r][c] == simBoard[r][c + 1]) && simBoard[r][c+2] == 0){
				//alert("block win right");
				userblockwin = c+2;
				return true;
			}
		}			
	}
	//added
	//check for win left
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 on the left
			if(c>2){
				if(simBoard[r][c] == 2 & (simBoard[r][c] == simBoard[r][c - 1]) && simBoard[r][c-2] == 0){
					//alert("block win left");
					userblockwin = c-2;
					return true;
				}
			}
		}			
	}
	//check for win up
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			if(r>2){
				if(simBoard[r][c] == 2 & (simBoard[r][c] == simBoard[r - 1][c]) && simBoard[r - 2][c] == 0){
					//alert("block win up");
					userblockwin = c;
					return true;
				}	
			}
		}
	}
	//check for win up right
	for(r = 5; r >= 0; r-=1){
		for(c = 0; c < 7; c+=1){
			if(r>2&&c<4){
				if(simBoard[r][c] == 2 & (simBoard[r][c] == simBoard[r - 1][c + 1]) && simBoard[r][c+2] == 0){
					//alert("block win UP right");
					userblockwin = c+2;
					return true;
				}	
			}
		}
	}
	//check for win up left
	for(r = 5; r >= 0; r-=1){
		for(c = 0; c < 7; c+=1){
			if(r>2&&c>2){
				if(simBoard[r][c] == 2 & (simBoard[r][c] == simBoard[r - 1][c - 1]) && simBoard[r-2][c-2] == 0){
					//alert("block win UP left");
					userblockwin = c-2;
					return true;
				}	
			}
		}
	}
	//check for win down right
	for(r = 5; r >= 0; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 below
			if(r<3&&c<4){
				if(simBoard[r][c] == 2 & (simBoard[r][c] == simBoard[r + 1][c + 1]) && simBoard[r+2][c+2] == 0){
					//alert("block win DOWN right");
					userblockwin = c+2;
					return true;
				}				
			}
		}
	}
	//check for win down left
	for(r = 5; r >= 0; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space 4 below
			if(r<3&&c>2){
				if(simBoard[r][c] == 2 & (simBoard[r][c] == simBoard[r + 1][c - 1]) && simBoard[r+2][c-2] == 0){
					//alert("block win DOWN left");
					userblockwin = c-2;
					return true;
				}
			}
		}
	}
	return false;
	//alert("left checkUser");
}

function checkBot(){
	//alert("checkbot");
	//check for win right
	//alert("check win right");
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 on the right
			if(c<4){
				if(simBoard[r][c] == 1 & (simBoard[r][c] == simBoard[r][c + 1]) && (simBoard[r][c] == simBoard[r][c + 2]) && simBoard[r][c+3] == 0){
					//alert("win right");
					botblockwin = c+3;
					return true;
				}	
			}
		}			
	}
	//added
	//check for win left
	//alert("check win left");
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 on the left
			if(c>2){
				if(simBoard[r][c] == 1 & (simBoard[r][c] == simBoard[r][c - 1]) && (simBoard[r][c] == simBoard[r][c - 2]) && simBoard[r][c-3] == 0){
					//alert("win left");
					botblockwin = c-3;
					return true;
				}
			}
		}			
	}
	//check for win up
	//alert("check win up");
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 above
			if(r>2){
				if(simBoard[r][c] == 1 & (simBoard[r][c] == simBoard[r - 1][c]) && (simBoard[r][c] == simBoard[r-2][c]) && simBoard[r-3][c] == 0){
					//alert("win up");
					botblockwin = c;
					return true;
				}				
			}
		}
	}
	//check for win up right
	//alert("check win up right");
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 above
			if(r>2&&c<4){
				if(simBoard[r][c] == 1 & (simBoard[r][c] == simBoard[r - 1][c + 1]) && (simBoard[r][c] == simBoard[r-2][c+2]) && simBoard[r-3][c+3] == 0){
					//alert("win UP right");
					botblockwin = c+3;
					return true;
				}	
			}
		}
	}
	//check for win up left
	//alert("check win up left");
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 on the left
			if(c>2&&r>2){
				if(simBoard[r][c] == 1 & (simBoard[r][c] == simBoard[r - 1][c - 1]) && (simBoard[r][c] == simBoard[r-1][c-2]) && simBoard[r-3][c-3] == 0){
					//alert("win UP left");
					botblockwin = c-3;
					return true;
				}
			}			
		}
	}
	//check for win down right
	//alert("check win down right");
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 below
			if(r<3&&c<4){
				if(simBoard[r][c] == 1 & (simBoard[r][c] == simBoard[r + 1][c + 1]) && (simBoard[r][c] == simBoard[r+2][c+2]) && simBoard[r+3][c+3] == 0){
					//alert("win DOWN right");
					botblockwin = c+3;
					return true;
				}				
			}
		}
	}
	//check for win down left
	//alert("check win down left");
	for(r = 5; r > -1; r-=1){
		for(c = 0; c < 7; c+=1){
			//check if there is space for 4 below and for 4 on the left
			if(r<3&&c>2){
				if(simBoard[r][c] == 1 & (simBoard[r][c] == simBoard[r + 1][c - 1]) && (simBoard[r][c] == simBoard[r+2][c-2]) && simBoard[r+3][c-3] == 0){
					//alert("win DOWN left");
					botblockwin = c-3;
					return true;
				}
			}
		}
	}
	return false;
	//alert("left checkBot");
}
</script>
</body>
</html>
